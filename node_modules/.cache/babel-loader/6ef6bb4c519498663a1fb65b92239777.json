{"ast":null,"code":"import _defineProperty from \"/Users/juliohernandez/projects/day_21/book-search/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/juliohernandez/projects/day_21/book-search/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Search from './components/Search';\nimport Results from './components/Results';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      store: [],\n      form: {\n        searchParameter: null,\n        printType: 'all',\n        bookType: 'noFilter'\n      }\n    };\n\n    this.fetchBooks = () => {\n      const URL = 'https://www.googleapis.com/books/v1/volumes?';\n      let endUrl = [];\n\n      if (this.state.form.searchParameter) {\n        endUrl.push(\"q={\".concat(this.state.form.searchParameter, \"}\"));\n        endUrl.push(\"printType=\".concat(this.state.form.printType));\n\n        if (this.state.form.bookType !== 'noFilter') {\n          endUrl.push(\"filter=\".concat(this.state.form.bookType));\n        }\n\n        let finalUrl = endUrl.join('&');\n        fetch(URL + finalUrl).then(res => {\n          return res.json();\n        }).then(res => {\n          const newBooks = res.items.map(book => {\n            return {\n              title: book.volumeInfo.title,\n              author: book.volumeInfo.authors ? book.volumeInfo.authors.join(' ') : 'Name not Available',\n              price: book.saleInfo.listPrice ? book.saleInfo.listPrice.amount : 'Price Not Avaliable',\n              description: book.volumeInfo.description,\n              thumbnail: book.volumeInfo.imageLinks.smallThumbnail\n            };\n          });\n          return newBooks;\n        }).then(books => {\n          this.setState({\n            store: books\n          });\n        });\n      }\n    };\n\n    this.search = event => {\n      event.preventDefault();\n\n      let newForm = _objectSpread({}, this.state.form);\n\n      newForm.searchParameter = event.target[0].value;\n      event.target[0].value = '';\n      this.setState({\n        form: newForm\n      }, () => this.fetchBooks());\n    };\n\n    this.filterEvent = (type, value) => {\n      let changedForm = _objectSpread({}, this.state.form);\n\n      changedForm[type] = value;\n      this.setState({\n        form: changedForm\n      }, () => this.fetchBooks());\n    };\n  }\n\n  render() {\n    return React.createElement(\"main\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Google Book Search\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.state.error), React.createElement(Search, {\n      form: this.state.form,\n      filterEvent: this.filterEvent,\n      search: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Results, {\n      store: this.state.store,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/juliohernandez/projects/day_21/book-search/src/App.js"],"names":["React","Search","Results","App","Component","state","store","form","searchParameter","printType","bookType","fetchBooks","URL","endUrl","push","finalUrl","join","fetch","then","res","json","newBooks","items","map","book","title","volumeInfo","author","authors","price","saleInfo","listPrice","amount","description","thumbnail","imageLinks","smallThumbnail","books","setState","search","event","preventDefault","newForm","target","value","filterEvent","type","changedForm","render","error"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;;AAEA,MAAMC,GAAN,SAAkBH,KAAK,CAACI,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCC,KADgC,GACxB;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,IAAI,EAAE;AACJC,QAAAA,eAAe,EAAE,IADb;AAEJC,QAAAA,SAAS,EAAE,KAFP;AAGJC,QAAAA,QAAQ,EAAE;AAHN;AAFA,KADwB;;AAAA,SAUhCC,UAVgC,GAUnB,MAAM;AACjB,YAAMC,GAAG,GAAG,8CAAZ;AACA,UAAIC,MAAM,GAAG,EAAb;;AACA,UAAI,KAAKR,KAAL,CAAWE,IAAX,CAAgBC,eAApB,EAAqC;AACnCK,QAAAA,MAAM,CAACC,IAAP,cAAkB,KAAKT,KAAL,CAAWE,IAAX,CAAgBC,eAAlC;AACAK,QAAAA,MAAM,CAACC,IAAP,qBAAyB,KAAKT,KAAL,CAAWE,IAAX,CAAgBE,SAAzC;;AACA,YAAI,KAAKJ,KAAL,CAAWE,IAAX,CAAgBG,QAAhB,KAA6B,UAAjC,EAA6C;AAC3CG,UAAAA,MAAM,CAACC,IAAP,kBAAsB,KAAKT,KAAL,CAAWE,IAAX,CAAgBG,QAAtC;AACD;;AACD,YAAIK,QAAQ,GAAGF,MAAM,CAACG,IAAP,CAAY,GAAZ,CAAf;AACAC,QAAAA,KAAK,CAACL,GAAG,GAAGG,QAAP,CAAL,CACGG,IADH,CACQC,GAAG,IAAI;AACX,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,SAHH,EAIGF,IAJH,CAIQC,GAAG,IAAI;AACX,gBAAME,QAAQ,GAAGF,GAAG,CAACG,KAAJ,CAAUC,GAAV,CAAcC,IAAI,IAAI;AACrC,mBAAO;AACLC,cAAAA,KAAK,EAAED,IAAI,CAACE,UAAL,CAAgBD,KADlB;AAELE,cAAAA,MAAM,EAAGH,IAAI,CAACE,UAAL,CAAgBE,OAAhB,GAA0BJ,IAAI,CAACE,UAAL,CAAgBE,OAAhB,CAAwBZ,IAAxB,CAA6B,GAA7B,CAA1B,GAA8D,oBAFlE;AAGLa,cAAAA,KAAK,EAAGL,IAAI,CAACM,QAAL,CAAcC,SAAd,GAA0BP,IAAI,CAACM,QAAL,CAAcC,SAAd,CAAwBC,MAAlD,GAA2D,qBAH9D;AAILC,cAAAA,WAAW,EAAET,IAAI,CAACE,UAAL,CAAgBO,WAJxB;AAKLC,cAAAA,SAAS,EAAEV,IAAI,CAACE,UAAL,CAAgBS,UAAhB,CAA2BC;AALjC,aAAP;AAOD,WARgB,CAAjB;AASA,iBAAOf,QAAP;AACD,SAfH,EAgBGH,IAhBH,CAgBQmB,KAAK,IAAI;AACb,eAAKC,QAAL,CAAc;AACZhC,YAAAA,KAAK,EAAE+B;AADK,WAAd;AAGD,SApBH;AAqBD;AACF,KA1C+B;;AAAA,SA4ChCE,MA5CgC,GA4CtBC,KAAD,IAAW;AAClBA,MAAAA,KAAK,CAACC,cAAN;;AAEA,UAAIC,OAAO,qBAAQ,KAAKrC,KAAL,CAAWE,IAAnB,CAAX;;AACAmC,MAAAA,OAAO,CAAClC,eAAR,GAA0BgC,KAAK,CAACG,MAAN,CAAa,CAAb,EAAgBC,KAA1C;AACAJ,MAAAA,KAAK,CAACG,MAAN,CAAa,CAAb,EAAgBC,KAAhB,GAAwB,EAAxB;AAEA,WAAKN,QAAL,CAAc;AACZ/B,QAAAA,IAAI,EAAEmC;AADM,OAAd,EAEG,MAAM,KAAK/B,UAAL,EAFT;AAGD,KAtD+B;;AAAA,SAwDhCkC,WAxDgC,GAwDlB,CAACC,IAAD,EAAOF,KAAP,KAAiB;AAC7B,UAAIG,WAAW,qBAAQ,KAAK1C,KAAL,CAAWE,IAAnB,CAAf;;AACAwC,MAAAA,WAAW,CAACD,IAAD,CAAX,GAAoBF,KAApB;AAEA,WAAKN,QAAL,CAAc;AACZ/B,QAAAA,IAAI,EAAEwC;AADM,OAAd,EAEG,MAAM,KAAKpC,UAAL,EAFT;AAGD,KA/D+B;AAAA;;AAiEhCqC,EAAAA,MAAM,GAAG;AAEP,WACE;AAAM,MAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAK3C,KAAL,CAAW4C,KAAhB,CAFF,EAGE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAE,KAAK5C,KAAL,CAAWE,IAAzB;AAA+B,MAAA,WAAW,EAAE,KAAKsC,WAAjD;AAA8D,MAAA,MAAM,EAAE,KAAKN,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAIE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF;AAQD;;AA3E+B;;AA8ElC,eAAeH,GAAf","sourcesContent":["import React from 'react';\nimport Search from './components/Search';\nimport Results from './components/Results';\n\nclass App extends React.Component {\n  state = {\n    store: [],\n    form: {\n      searchParameter: null,\n      printType: 'all',\n      bookType: 'noFilter',\n    },\n  }\n\n  fetchBooks = () => {\n    const URL = 'https://www.googleapis.com/books/v1/volumes?';\n    let endUrl = [];\n    if (this.state.form.searchParameter) {\n      endUrl.push(`q={${this.state.form.searchParameter}}`);\n      endUrl.push(`printType=${this.state.form.printType}`);\n      if (this.state.form.bookType !== 'noFilter') {\n        endUrl.push(`filter=${this.state.form.bookType}`);\n      }\n      let finalUrl = endUrl.join('&');\n      fetch(URL + finalUrl)\n        .then(res => {\n          return res.json()\n        })\n        .then(res => {\n          const newBooks = res.items.map(book => {\n            return {\n              title: book.volumeInfo.title,\n              author: (book.volumeInfo.authors ? book.volumeInfo.authors.join(' ') : 'Name not Available'),\n              price: (book.saleInfo.listPrice ? book.saleInfo.listPrice.amount : 'Price Not Avaliable'),\n              description: book.volumeInfo.description,\n              thumbnail: book.volumeInfo.imageLinks.smallThumbnail,\n            }\n          })\n          return newBooks;\n        })\n        .then(books => {\n          this.setState({\n            store: books\n          })\n        })\n    }\n  }\n\n  search = (event) => {\n    event.preventDefault();\n\n    let newForm = { ...this.state.form };\n    newForm.searchParameter = event.target[0].value;\n    event.target[0].value = '';\n\n    this.setState({\n      form: newForm\n    }, () => this.fetchBooks());\n  }\n\n  filterEvent = (type, value) => {\n    let changedForm = { ...this.state.form };\n    changedForm[type] = value;\n\n    this.setState({\n      form: changedForm\n    }, () => this.fetchBooks());\n  }\n\n  render() {\n\n    return (\n      <main className='App'>\n        <h1>Google Book Search</h1>\n        <h2>{this.state.error}</h2>\n        <Search form={this.state.form} filterEvent={this.filterEvent} search={this.search} />\n        <Results store={this.state.store} />\n      </main>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}