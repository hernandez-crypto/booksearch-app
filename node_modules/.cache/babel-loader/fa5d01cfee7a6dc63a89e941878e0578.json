{"ast":null,"code":"import _defineProperty from \"/Users/juliohernandez/projects/day_21/book-search/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/juliohernandez/projects/day_21/book-search/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport SearchFeature from './components/SearchBar';\nimport ResultList from './components/Results';\n\nclass BookSearchApp extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      store: [],\n      form: {\n        searchParameter: null,\n        printType: 'all',\n        bookType: 'noFilter'\n      },\n      error: null\n    };\n\n    this.fetchData = () => {\n      const URL = 'https://www.googleapis.com/books/v1/volumes?';\n      let endUrl = [];\n\n      if (this.state.form.searchParameter) {\n        endUrl.push(\"q={\".concat(this.state.form.searchParameter, \"}\"));\n        endUrl.push(\"printType=\".concat(this.state.form.printType));\n\n        if (this.state.form.bookType !== 'noFilter') {\n          endUrl.push(\"filter=\".concat(this.state.form.bookType));\n        }\n\n        let finalUrl = endUrl.join('&');\n        fetch(URL + finalUrl).then(res => {\n          return res.json();\n        }).then(res => {\n          if (res.error) {\n            throw res;\n          }\n\n          if (res.totalItems === 0) {\n            this.setState({\n              error: 'No items found'\n            });\n            return [];\n          } else {\n            const newData = res.items.map(book => {\n              return {\n                title: book.volumeInfo.title,\n                author: book.volumeInfo.authors ? book.volumeInfo.authors.join(' ') : 'No Author Information',\n                price: book.saleInfo.listPrice ? book.saleInfo.listPrice.amount : 0,\n                description: book.volumeInfo.description,\n                thumbnail: book.volumeInfo.imageLinks.smallThumbnail\n              };\n            });\n            return newData;\n          }\n        }).then(data => {\n          this.setState({\n            store: data\n          });\n        }).catch(err => {\n          console.log(err);\n          this.setState({\n            error: err.error.message\n          });\n        });\n      }\n    };\n\n    this.search = event => {\n      event.preventDefault();\n\n      let newForm = _objectSpread({}, this.state.form);\n\n      newForm.searchParameter = event.target[0].value;\n      event.target[0].value = '';\n      this.setState({\n        form: newForm\n      }, () => this.fetchData());\n    };\n\n    this.changeFilter = (type, value) => {\n      let changedForm = _objectSpread({}, this.state.form);\n\n      changedForm[type] = value;\n      this.setState({\n        form: changedForm\n      }, () => this.fetchData());\n    };\n  }\n\n  render() {\n    return React.createElement(\"main\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Google Book Search\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, this.state.error), React.createElement(SearchFeature, {\n      form: this.state.form,\n      changeFilter: this.changeFilter,\n      search: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(ResultList, {\n      store: this.state.store,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default BookSearchApp;","map":{"version":3,"sources":["/Users/juliohernandez/projects/day_21/book-search/src/App.js"],"names":["React","SearchFeature","ResultList","BookSearchApp","Component","state","store","form","searchParameter","printType","bookType","error","fetchData","URL","endUrl","push","finalUrl","join","fetch","then","res","json","totalItems","setState","newData","items","map","book","title","volumeInfo","author","authors","price","saleInfo","listPrice","amount","description","thumbnail","imageLinks","smallThumbnail","data","catch","err","console","log","message","search","event","preventDefault","newForm","target","value","changeFilter","type","changedForm","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SearchFeature from './components/SearchBar';\nimport ResultList from './components/Results';\n\nclass BookSearchApp extends React.Component {\n  state = {\n    store: [],\n    form: {\n      searchParameter: null,\n      printType: 'all',\n      bookType: 'noFilter',\n    },\n    error: null,\n\n  }\n\n  fetchData = () => {\n    const URL = 'https://www.googleapis.com/books/v1/volumes?';\n    let endUrl = [];\n    if (this.state.form.searchParameter) {\n      endUrl.push(`q={${this.state.form.searchParameter}}`);\n      endUrl.push(`printType=${this.state.form.printType}`);\n      if (this.state.form.bookType !== 'noFilter') {\n        endUrl.push(`filter=${this.state.form.bookType}`);\n      }\n      let finalUrl = endUrl.join('&');\n      fetch(URL + finalUrl)\n        .then(res => {\n          return res.json()\n        })\n        .then(res => {\n          if (res.error) {\n            throw res\n          }\n          if (res.totalItems === 0) {\n            this.setState({\n              error: 'No items found'\n            })\n            return [];\n          } else {\n            const newData = res.items.map(book => {\n              return {\n                title: book.volumeInfo.title,\n                author: (book.volumeInfo.authors ? book.volumeInfo.authors.join(' ') : 'No Author Information'),\n                price: (book.saleInfo.listPrice ? book.saleInfo.listPrice.amount : 0),\n                description: book.volumeInfo.description,\n                thumbnail: book.volumeInfo.imageLinks.smallThumbnail,\n              }\n            })\n            return newData;\n          }\n        })\n        .then(data => {\n          this.setState({\n            store: data\n          })\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({\n            error: err.error.message\n          })\n        })\n    }\n  }\n\n  search = (event) => {\n    event.preventDefault();\n\n    let newForm = { ...this.state.form };\n    newForm.searchParameter = event.target[0].value;\n    event.target[0].value = '';\n\n    this.setState({\n      form: newForm\n    }, () => this.fetchData());\n  }\n\n  changeFilter = (type, value) => {\n    let changedForm = { ...this.state.form };\n    changedForm[type] = value;\n\n    this.setState({\n      form: changedForm\n    }, () => this.fetchData());\n  }\n\n  render() {\n\n    return (\n      <main className='App'>\n        <h1>Google Book Search</h1>\n        <h2>{this.state.error}</h2>\n        <SearchFeature form={this.state.form} changeFilter={this.changeFilter} search={this.search} />\n        <ResultList store={this.state.store} />\n      </main>\n    );\n  }\n}\n\nexport default BookSearchApp;"]},"metadata":{},"sourceType":"module"}